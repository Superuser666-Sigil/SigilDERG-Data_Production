{
    "name": "mysql",
    "version": "26.0.0",
    "description": "ALLOW: Positive community sentiment",
    "repository": "",
    "keywords": [],
    "categories": [],
    "readme": {
        "raw_markdown": "[](https://docs.rs/mysql/latest/mysql/all.html \"show sidebar\")\n# Crate mysqlCopy item path\n[Settings](https://docs.rs/mysql/latest/settings.html)\n[Help](https://docs.rs/mysql/latest/help.html)\nSummary[Source](https://docs.rs/mysql/latest/src/mysql/lib.rs.html#9-1086)\nExpand description\nThis crate offers:\n  * MySql database driver in pure rust;\n  * connection pool.\n\n\nFeatures:\n  * macOS, Windows and Linux support;\n  * TLS support via **native-tls** or **rustls** (see the [SSL Support](https://docs.rs/mysql/latest/mysql/#ssl-support) section);\n  * MySql text protocol support, i.e. support of simple text queries and text result sets;\n  * MySql binary protocol support, i.e. support of prepared statements and binary result sets;\n  * support of multi-result sets;\n  * support of named parameters for prepared statements (see the [Named Parameters](https://docs.rs/mysql/latest/mysql/#named-parameters) section);\n  * per-connection cache of prepared statements (see the [Statement Cache](https://docs.rs/mysql/latest/mysql/#statement-cache) section);\n  * buffer pool (see the [Buffer Pool](https://docs.rs/mysql/latest/mysql/#buffer-pool) section);\n  * support of MySql packets larger than 2^24;\n  * support of Unix sockets and Windows named pipes;\n  * support of custom LOCAL INFILE handlers;\n  * support of MySql protocol compression;\n  * support of auth plugins: \n    * **mysql_native_password** - for MySql prior to v8;\n    * **caching_sha2_password** - for MySql v8 and higher;\n    * **mysql_clear_password** - opt-in (see [`Opts::get_enable_cleartext_plugin`](https://docs.rs/mysql/latest/mysql/struct.Opts.html#method.get_enable_cleartext_plugin \"method mysql::Opts::get_enable_cleartext_plugin\").\n\n\n### [\u00a7](https://docs.rs/mysql/latest/mysql/#installation)Installation\nPut the desired version of the crate into the `dependencies` section of your `Cargo.toml`:\n```\n[dependencies]\nmysql = \"*\"\n```\n\n### [\u00a7](https://docs.rs/mysql/latest/mysql/#example)Example\n```\nuse mysql::*;\nuse mysql::prelude::*;\n#[derive(Debug, PartialEq, Eq)]\nstruct Payment {\n  customer_id: i32,\n  amount: i32,\n  account_name: Option<String>,\n}\n\nfn main() -> std::result::Result<(), Box<dyn std::error::Error>> {\n  let url = \"mysql://root:password@localhost:3307/db_name\";\n  let pool = Pool::new(url)?;\n  let mut conn = pool.get_conn()?;\n  // Let's create a table for payments.\n  conn.query_drop(\n    r\"CREATE TEMPORARY TABLE payment (\n      customer_id int not null,\n      amount int not null,\n      account_name text\n    )\")?;\n  let payments = vec![\n    Payment { customer_id: 1, amount: 2, account_name: None },\n    Payment { customer_id: 3, amount: 4, account_name: Some(\"foo\".into()) },\n    Payment { customer_id: 5, amount: 6, account_name: None },\n    Payment { customer_id: 7, amount: 8, account_name: None },\n    Payment { customer_id: 9, amount: 10, account_name: Some(\"bar\".into()) },\n  ];\n  // Now let's insert payments to the database\n  conn.exec_batch(\n    r\"INSERT INTO payment (customer_id, amount, account_name)\n     VALUES (:customer_id, :amount, :account_name)\",\n    payments.iter().map(|p| params! {\n      \"customer_id\" => p.customer_id,\n      \"amount\" => p.amount,\n      \"account_name\" => &p.account_name,\n    })\n  )?;\n  // Let's select payments from database. Type inference should do the trick here.\n  let selected_payments = conn\n    .query_map(\n      \"SELECT customer_id, amount, account_name from payment\",\n      |(customer_id, amount, account_name)| {\n        Payment { customer_id, amount, account_name }\n      },\n    )?;\n  // Let's make sure, that `payments` equals to `selected_payments`.\n  // Mysql gives no guaranties on order of returned rows\n  // without `ORDER BY`, so assume we are lucky.\n  assert_eq!(payments, selected_payments);\n  println!(\"Yay!\");\n  Ok(())\n}\n```\n\n### [\u00a7](https://docs.rs/mysql/latest/mysql/#crate-features)Crate Features\n  * feature sets:\n    * **default** \u2013 includes `buffer-pool` `flate2/zlib` and `derive`\n    * **default-rust** - same as `default` but with `flate2/rust_backend` instead of `flate2/zlib`\n    * **minimal** - includes `flate2/zlib` only\n    * **minimal-rust** - includes `flate2/rust_backend` only\n  * features:\n    * **buffer-pool** \u2013 enables buffer pooling (see the [Buffer Pool](https://docs.rs/mysql/latest/mysql/#buffer-pool) section)\n    * **derive** \u2013 reexports derive macros under `prelude` (see [corresponding section](https://docs.rs/mysql_common/latest/mysql_common/#derive-macros) in the `mysql_common` documentation)\n  * TLS/SSL related features:\n    * **native-tls** \u2013 specifies `native-tls` as the TLS backend (see the [SSL Support](https://docs.rs/mysql/latest/mysql/#ssl-support) section)\n    * **rustls-tls** \u2013 specifies `rustls` as the TLS backend using `aws-lc-rs` crypto provider (see the [SSL Support](https://docs.rs/mysql/latest/mysql/#ssl-support) section)\n    * **rustls-tls-ring** \u2013 specifies `rustls` as the TLS backend using `ring` crypto provider (see the [SSL Support](https://docs.rs/mysql/latest/mysql/#ssl-support) section)\n    * **rustls** - specifies `rustls` as the TLS backend without crypto provider (see the [SSL Support](https://docs.rs/mysql/latest/mysql/#ssl-support) section)\n  * features proxied from `mysql_common`:\n    * **derive** - see [this table](https://docs.rs/mysql_common/latest/mysql_common/#crate-features).\n    * **chrono** - see [this table](https://docs.rs/mysql_common/latest/mysql_common/#crate-features).\n    * **time** - see [this table](https://docs.rs/mysql_common/latest/mysql_common/#crate-features).\n    * **bigdecimal** - see [this table](https://docs.rs/mysql_common/latest/mysql_common/#crate-features).\n    * **rust_decimal** - see [this table](https://docs.rs/mysql_common/latest/mysql_common/#crate-features).\n    * **frunk** - see [this table](https://docs.rs/mysql_common/latest/mysql_common/#crate-features).\n    * **binlog** - see [this table](https://docs.rs/mysql_common/latest/mysql_common/#crate-features).\n\n\nPlease note, that you\u2019ll need to reenable required features if you are using `default-features = false`:\n```\n[dependencies]\n# Lets say that we want to use only the `rustls-tls` feature:\nmysql = { version = \"*\", default-features = false, features = [\"minimal-rust\", \"rustls-tls\"] }\n```\n\n### [\u00a7](https://docs.rs/mysql/latest/mysql/#api-documentation)API Documentation\nPlease refer to the [crate docs](https://docs.rs/mysql).\n### [\u00a7](https://docs.rs/mysql/latest/mysql/#basic-structures)Basic structures\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#opts)`Opts`\nThis structure holds server host name, client username/password and other settings, that controls client behavior.\n##### [\u00a7](https://docs.rs/mysql/latest/mysql/#url-based-connection-string)URL-based connection string\nNote, that you can use URL-based connection string as a source of an `Opts` instance. URL schema must be `mysql`. Host, port and credentials, as well as query parameters, should be given in accordance with the RFC 3986.\nExamples:\n```\nlet _ = Opts::from_url(\"mysql://localhost/some_db\")?;\nlet _ = Opts::from_url(\"mysql://[::1]/some_db\")?;\nlet _ = Opts::from_url(\"mysql://user:pass%20word@127.0.0.1:3307/some_db?\")?;\n```\n\nSupported URL parameters (for the meaning of each field please refer to the docs on `Opts` structure in the create API docs):\n  * `user: string` \u2013 MySql client user name\n  * `password: string` \u2013 MySql client password;\n  * `db_name: string` \u2013 MySql database name;\n  * `host: Host` \u2013 MySql server hostname/ip;\n  * `port: u16` \u2013 MySql server port;\n  * `pool_min: usize` \u2013 see [`PoolConstraints::min`](https://docs.rs/mysql/latest/mysql/struct.PoolConstraints.html#method.min \"method mysql::PoolConstraints::min\");\n  * `pool_max: usize` \u2013 see [`PoolConstraints::max`](https://docs.rs/mysql/latest/mysql/struct.PoolConstraints.html#method.max \"method mysql::PoolConstraints::max\");\n  * `prefer_socket: true | false` - see [`Opts::get_prefer_socket`](https://docs.rs/mysql/latest/mysql/struct.Opts.html#method.get_prefer_socket \"method mysql::Opts::get_prefer_socket\");\n  * `tcp_keepalive_time_ms: u32` - defines the value (in milliseconds) of the `tcp_keepalive_time` field in the `Opts` structure;\n  * `tcp_keepalive_probe_interval_secs: u32` - defines the value of the `tcp_keepalive_probe_interval_secs` field in the `Opts` structure;\n  * `tcp_keepalive_probe_count: u32` - defines the value of the `tcp_keepalive_probe_count` field in the `Opts` structure;\n  * `tcp_connect_timeout_ms: u64` - defines the value (in milliseconds) of the `tcp_connect_timeout` field in the `Opts` structure;\n  * `tcp_user_timeout_ms` - defines the value (in milliseconds) of the `tcp_user_timeout` field in the `Opts` structure;\n  * `stmt_cache_size: u32` - defines the value of the same field in the `Opts` structure;\n  * `enable_cleartext_plugin` \u2013 see [`Opts::get_enable_cleartext_plugin`](https://docs.rs/mysql/latest/mysql/struct.Opts.html#method.get_enable_cleartext_plugin \"method mysql::Opts::get_enable_cleartext_plugin\");\n  * `secure_auth` \u2013 see [`Opts::get_secure_auth`](https://docs.rs/mysql/latest/mysql/struct.Opts.html#method.get_secure_auth \"method mysql::Opts::get_secure_auth\");\n  * `reset_connection` \u2013 see [`PoolOpts::reset_connection`](https://docs.rs/mysql/latest/mysql/struct.PoolOpts.html#method.reset_connection \"method mysql::PoolOpts::reset_connection\");\n  * `check_health` \u2013 see [`PoolOpts::check_health`](https://docs.rs/mysql/latest/mysql/struct.PoolOpts.html#method.check_health \"method mysql::PoolOpts::check_health\");\n  * `compress` - defines the value of the same field in the `Opts` structure. Supported value are: \n    * `true` - enables compression with the default compression level;\n    * `fast` - enables compression with \u201cfast\u201d compression level;\n    * `best` - enables compression with \u201cbest\u201d compression level;\n    * `1`..`9` - enables compression with the given compression level.\n  * `socket` - socket path on UNIX, or pipe name on Windows.\n\n\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#optsbuilder)`OptsBuilder`\nIt\u2019s a convenient builder for the `Opts` structure. It defines setters for fields of the `Opts` structure.\n```\nlet opts = OptsBuilder::new()\n  .user(Some(\"foo\"))\n  .db_name(Some(\"bar\"));\nlet _ = Conn::new(opts)?;\n```\n\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#conn)`Conn`\nThis structure represents an active MySql connection. It also holds statement cache and metadata for the last result set.\nConn\u2019s destructor will gracefully disconnect it from the server.\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#transaction)`Transaction`\nIt\u2019s a simple wrapper on top of a routine, that starts with `START TRANSACTION` and ends with `COMMIT` or `ROLLBACK`.\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet pool = Pool::new(get_opts())?;\nlet mut conn = pool.get_conn()?;\nlet mut tx = conn.start_transaction(TxOpts::default())?;\ntx.query_drop(\"CREATE TEMPORARY TABLE tmp (TEXT a)\")?;\ntx.exec_drop(\"INSERT INTO tmp (a) VALUES (?)\", (\"foo\",))?;\nlet val: Option<String> = tx.query_first(\"SELECT a from tmp\")?;\nassert_eq!(val.unwrap(), \"foo\");\n// Note, that transaction will be rolled back implicitly on Drop, if not committed.\ntx.rollback();\nlet val: Option<String> = conn.query_first(\"SELECT a from tmp\")?;\nassert_eq!(val, None);\n```\n\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#pool)`Pool`\nIt\u2019s a reference to a connection pool, that can be cloned and shared between threads.\n```\nuse mysql::*;\nuse mysql::prelude::*;\nuse std::thread::spawn;\nlet pool = Pool::new(get_opts())?;\nlet handles = (0..4).map(|i| {\n  spawn({\n    let pool = pool.clone();\n    move || {\n      let mut conn = pool.get_conn()?;\n      conn.exec_first::<u32, _, _>(\"SELECT ? * 10\", (i,))\n        .map(Option::unwrap)\n    }\n  })\n});\nlet result: Result<Vec<u32>> = handles.map(|handle| handle.join().unwrap()).collect();\nassert_eq!(result.unwrap(), vec![0, 10, 20, 30]);\n```\n\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#statement)`Statement`\nStatement, actually, is just an identifier coupled with statement metadata, i.e an information about its parameters and columns. Internally the `Statement` structure also holds additional data required to support named parameters (see bellow).\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet pool = Pool::new(get_opts())?;\nlet mut conn = pool.get_conn()?;\nlet stmt = conn.prep(\"DO ?\")?;\n// The prepared statement will return no columns.\nassert!(stmt.columns().is_empty());\n// The prepared statement have one parameter.\nlet param = stmt.params().get(0).unwrap();\nassert_eq!(param.schema_str(), \"\");\nassert_eq!(param.table_str(), \"\");\nassert_eq!(param.name_str(), \"?\");\n```\n\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#value)`Value`\nThis enumeration represents the raw value of a MySql cell. Library offers conversion between `Value` and different rust types via `FromValue` trait described below.\n##### [\u00a7](https://docs.rs/mysql/latest/mysql/#fromvalue-trait)`FromValue` trait\nThis trait is reexported from **mysql_common** create. Please refer to its [crate docs](https://docs.rs/mysql_common) for the list of supported conversions.\nTrait offers conversion in two flavours:\n  * `from_value(Value) -> T` - convenient, but panicking conversion.\nNote, that for any variant of `Value` there exist a type, that fully covers its domain, i.e. for any variant of `Value` there exist `T: FromValue` such that `from_value` will never panic. This means, that if your database schema is known, then it\u2019s possible to write your application using only `from_value` with no fear of runtime panic.\n  * `from_value_opt(Value) -> Option<T>` - non-panicking, but less convenient conversion.\nThis function is useful to probe conversion in cases, where source database schema is unknown.\n\n\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet via_test_protocol: u32 = from_value(Value::Bytes(b\"65536\".to_vec()));\nlet via_bin_protocol: u32 = from_value(Value::UInt(65536));\nassert_eq!(via_test_protocol, via_bin_protocol);\nlet unknown_val = // ...\n// Maybe it is a float?\nlet unknown_val = match from_value_opt::<f64>(unknown_val) {\n  Ok(float) => {\n    println!(\"A float value: {}\", float);\n    return Ok(());\n  }\n  Err(FromValueError(unknown_val)) => unknown_val,\n};\n// Or a string?\nlet unknown_val = match from_value_opt::<String>(unknown_val) {\n  Ok(string) => {\n    println!(\"A string value: {}\", string);\n    return Ok(());\n  }\n  Err(FromValueError(unknown_val)) => unknown_val,\n};\n// Screw this, I'll simply match on it\nmatch unknown_val {\n  val @ Value::NULL => {\n    println!(\"An empty value: {:?}\", from_value::<Option<u8>>(val))\n  },\n  val @ Value::Bytes(..) => {\n    // It's non-utf8 bytes, since we already tried to convert it to String\n    println!(\"Bytes: {:?}\", from_value::<Vec<u8>>(val))\n  }\n  val @ Value::Int(..) => {\n    println!(\"A signed integer: {}\", from_value::<i64>(val))\n  }\n  val @ Value::UInt(..) => {\n    println!(\"An unsigned integer: {}\", from_value::<u64>(val))\n  }\n  Value::Float(..) => unreachable!(\"already tried\"),\n  val @ Value::Double(..) => {\n    println!(\"A double precision float value: {}\", from_value::<f64>(val))\n  }\n  val @ Value::Date(..) => {\n    use time::PrimitiveDateTime;\n    println!(\"A date value: {}\", from_value::<PrimitiveDateTime>(val))\n  }\n  val @ Value::Time(..) => {\n    use std::time::Duration;\n    println!(\"A time value: {:?}\", from_value::<Duration>(val))\n  }\n}\n```\n\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#row)`Row`\nInternally `Row` is a vector of `Value`s, that also allows indexing by a column name/offset, and stores row metadata. Library offers conversion between `Row` and sequences of Rust types via `FromRow` trait described below.\n##### [\u00a7](https://docs.rs/mysql/latest/mysql/#fromrow-trait)`FromRow` trait\nThis trait is reexported from **mysql_common** create. Please refer to its [crate docs](https://docs.rs/mysql_common) for the list of supported conversions.\nThis conversion is based on the `FromValue` and so comes in two similar flavours:\n  * `from_row(Row) -> T` - same as `from_value`, but for rows;\n  * `from_row_opt(Row) -> Option<T>` - same as `from_value_opt`, but for rows.\n\n\n[`Queryable`](https://docs.rs/mysql/latest/mysql/#queryable) trait offers implicit conversion for rows of a query result, that is based on this trait.\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet mut conn = Conn::new(get_opts())?;\n// Single-column row can be converted to a singular value:\nlet val: Option<String> = conn.query_first(\"SELECT 'foo'\")?;\nassert_eq!(val.unwrap(), \"foo\");\n// Example of a multi-column row conversion to an inferred type:\nlet row = conn.query_first(\"SELECT 255, 256\")?;\nassert_eq!(row, Some((255u8, 256u16)));\n// The FromRow trait does not support to-tuple conversion for rows with more than 12 columns,\n// but you can do this by hand using row indexing or `Row::take` method:\nlet row: Row = conn.exec_first(\"select 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12\", ())?.unwrap();\nfor i in 0..row.len() {\n  assert_eq!(row[i], Value::Int(i as i64));\n}\n// Another way to handle wide rows is to use HList (requires `mysql_common/frunk` feature)\nuse frunk::{HList, hlist, hlist_pat};\nlet query = \"select 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15\";\ntype RowType = HList!(u8, u16, u32, u8, u8, u8, u8, u8, u8, u8, u8, u8, u8, u8, u8, u8);\nlet first_three_columns = conn.query_map(query, |row: RowType| {\n  // do something with the row (see the `frunk` crate documentation)\n  let hlist_pat![c1, c2, c3, ...] = row;\n  (c1, c2, c3)\n});\nassert_eq!(first_three_columns.unwrap(), vec![(0_u8, 1_u16, 2_u32)]);\n// Some unknown row\nlet row: Row = conn.query_first(\n  // ...\n)?.unwrap();\nfor column in row.columns_ref() {\n  // Cells in a row can be indexed by numeric index or by column name\n  let column_value = &row[column.name_str().as_ref()];\n  println!(\n    \"Column {} of type {:?} with value {:?}\",\n    column.name_str(),\n    column.column_type(),\n    column_value,\n  );\n}\n```\n\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#params)`Params`\nRepresents parameters of a prepared statement, but this type won\u2019t appear directly in your code because binary protocol API will ask for `T: Into<Params>`, where `Into<Params>` is implemented:\n  * for tuples of `Into<Value>` types up to arity 12;\n**Note:** singular tuple requires extra comma, e.g. `(\"foo\",)`;\n  * for `IntoIterator<Item: Into<Value>>` for cases, when your statement takes more than 12 parameters;\n  * for named parameters representation (the value of the `params!` macro, described below).\n\n\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet mut conn = Conn::new(get_opts())?;\n// Singular tuple requires extra comma:\nlet row: Option<u8> = conn.exec_first(\"SELECT ?\", (0,))?;\nassert_eq!(row.unwrap(), 0);\n// More than 12 parameters:\nlet row: Option<u8> = conn.exec_first(\n  \"SELECT CONVERT(? + ? + ? + ? + ? + ? + ? + ? + ? + ? + ? + ? + ? + ? + ? + ?, UNSIGNED)\",\n  (0..16).collect::<Vec<_>>(),\n)?;\nassert_eq!(row.unwrap(), 120);\n```\n\n**Note:** Please refer to the [**mysql_common** crate docs](https://docs.rs/mysql_common) for the list of types, that implements `Into<Value>`.\n##### [\u00a7](https://docs.rs/mysql/latest/mysql/#serialized-deserialized)`Serialized`, `Deserialized`\nWrapper structures for cases, when you need to provide a value for a JSON cell, or when you need to parse JSON cell as a struct.\n```\nuse mysql::*;\nuse mysql::prelude::*;\nuse serde::{Deserialize, Serialize};\n/// Serializable structure.\n#[derive(Debug, PartialEq, Serialize, Deserialize)]\nstruct Example {\n  foo: u32,\n}\n// Value::from for Serialized will emit json string.\nlet value = Value::from(Serialized(Example { foo: 42 }));\nassert_eq!(value, Value::Bytes(br#\"{\"foo\":42}\"#.to_vec()));\n// from_value for Deserialized will parse json string.\nlet structure: Deserialized<Example> = from_value(value);\nassert_eq!(structure, Deserialized(Example { foo: 42 }));\n```\n\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#queryresult)[`QueryResult`](https://docs.rs/mysql/latest/mysql/struct.QueryResult.html \"struct mysql::QueryResult\")\nIt\u2019s an iterator over rows of a query result with support of multi-result sets. It\u2019s intended for cases when you need full control during result set iteration. For other cases [`Queryable`](https://docs.rs/mysql/latest/mysql/#queryable) provides a set of methods that will immediately consume the first result set and drop everything else.\nThis iterator is lazy so it won\u2019t read the result from server until you iterate over it. MySql protocol is strictly sequential, so `Conn` will be mutably borrowed until the result is fully consumed (please also look at [`QueryResult::iter`](https://docs.rs/mysql/latest/mysql/struct.QueryResult.html#method.iter \"method mysql::QueryResult::iter\") docs).\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet mut conn = Conn::new(get_opts())?;\n// This query will emit two result sets.\nlet mut result = conn.query_iter(\"SELECT 1, 2; SELECT 3, 3.14;\")?;\nlet mut sets = 0;\nwhile let Some(result_set) = result.iter() {\n  sets += 1;\n  println!(\"Result set columns: {:?}\", result_set.columns());\n  println!(\n    \"Result set meta: {}, {:?}, {} {}\",\n    result_set.affected_rows(),\n    result_set.last_insert_id(),\n    result_set.warnings(),\n    result_set.info_str(),\n  );\n  for row in result_set {\n    match sets {\n      1 => {\n        // First result set will contain two numbers.\n        assert_eq!((1_u8, 2_u8), from_row(row?));\n      }\n      2 => {\n        // Second result set will contain a number and a float.\n        assert_eq!((3_u8, 3.14), from_row(row?));\n      }\n      _ => unreachable!(),\n    }\n  }\n}\nassert_eq!(sets, 2);\n```\n\n### [\u00a7](https://docs.rs/mysql/latest/mysql/#text-protocol)Text protocol\nMySql text protocol is implemented in the set of `Queryable::query*` methods. It\u2019s useful when your query doesn\u2019t have parameters.\n**Note:** All values of a text protocol result set will be encoded as strings by the server, so `from_value` conversion may lead to additional parsing costs.\nExamples:\n```\nlet pool = Pool::new(get_opts())?;\nlet val = pool.get_conn()?.query_first(\"SELECT POW(2, 16)\")?;\n// Text protocol returns bytes even though the result of POW\n// is actually a floating point number.\nassert_eq!(val, Some(Value::Bytes(\"65536\".as_bytes().to_vec())));\n```\n\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#the-textquery-trait)The `TextQuery` trait.\nThe `TextQuery` trait covers the set of `Queryable::query*` methods from the perspective of a query, i.e. `TextQuery` is something, that can be performed if suitable connection is given. Suitable connections are:\n  * `&Pool`\n  * `Conn`\n  * `PooledConn`\n  * `&mut Conn`\n  * `&mut PooledConn`\n  * `&mut Transaction`\n\n\nThe unique characteristic of this trait, is that you can give away the connection and thus produce `QueryResult` that satisfies `'static`:\n```\nuse mysql::*;\nuse mysql::prelude::*;\nfn iter(pool: &Pool) -> Result<impl Iterator<Item=Result<u32>>> {\n  let result = \"SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3\".run(pool)?;\n  Ok(result.map(|row| row.map(from_row)))\n}\nlet pool = Pool::new(get_opts())?;\nlet it = iter(&pool)?;\nassert_eq!(it.collect::<Result<Vec<u32>>>()?, vec![1, 2, 3]);\n```\n\n### [\u00a7](https://docs.rs/mysql/latest/mysql/#binary-protocol-and-prepared-statements)Binary protocol and prepared statements.\nMySql binary protocol is implemented in `prep`, `close` and the set of `exec*` methods, defined on the [`Queryable`](https://docs.rs/mysql/latest/mysql/#queryable) trait. Prepared statements is the only way to pass rust value to the MySql server. MySql uses `?` symbol as a parameter placeholder and it\u2019s only possible to use parameters where a single MySql value is expected. For example:\n```\nlet pool = Pool::new(get_opts())?;\nlet val = pool.get_conn()?.exec_first(\"SELECT POW(?, ?)\", (2, 16))?;\nassert_eq!(val, Some(Value::Double(65536.0)));\n```\n\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#statements)Statements\nIn MySql each prepared statement belongs to a particular connection and can\u2019t be executed on another connection. Trying to do so will lead to an error. The driver won\u2019t tie statement to its connection in any way, but one can look on to the connection id, contained in the `Statement` structure.\n```\nlet pool = Pool::new(get_opts())?;\nlet mut conn_1 = pool.get_conn()?;\nlet mut conn_2 = pool.get_conn()?;\nlet stmt_1 = conn_1.prep(\"SELECT ?\")?;\n// stmt_1 is for the conn_1, ..\nassert!(stmt_1.connection_id() == conn_1.connection_id());\nassert!(stmt_1.connection_id() != conn_2.connection_id());\n// .. so stmt_1 will execute only on conn_1\nassert!(conn_1.exec_drop(&stmt_1, (\"foo\",)).is_ok());\nassert!(conn_2.exec_drop(&stmt_1, (\"foo\",)).is_err());\n```\n\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#statement-cache)Statement cache\n##### [\u00a7](https://docs.rs/mysql/latest/mysql/#note)Note\nStatement cache only works for:\n  1. for raw [`Conn`](https://docs.rs/mysql/latest/mysql/struct.Conn.html \"struct mysql::Conn\")\n  2. for [`PooledConn`](https://docs.rs/mysql/latest/mysql/struct.PooledConn.html \"struct mysql::PooledConn\"): \n     * within its lifetime if [`PoolOpts::reset_connection`](https://docs.rs/mysql/latest/mysql/struct.PoolOpts.html#method.reset_connection \"method mysql::PoolOpts::reset_connection\") is `true`\n     * within the lifetime of a wrapped [`Conn`](https://docs.rs/mysql/latest/mysql/struct.Conn.html \"struct mysql::Conn\") if [`PoolOpts::reset_connection`](https://docs.rs/mysql/latest/mysql/struct.PoolOpts.html#method.reset_connection \"method mysql::PoolOpts::reset_connection\") is `false`\n\n\n##### [\u00a7](https://docs.rs/mysql/latest/mysql/#description)Description\n`Conn` will manage the cache of prepared statements on the client side, so subsequent calls to prepare with the same statement won\u2019t lead to a client-server roundtrip. Cache size for each connection is determined by the `stmt_cache_size` field of the `Opts` structure. Statements, that are out of this boundary will be closed in LRU order.\nStatement cache is completely disabled if `stmt_cache_size` is zero.\n**Caveats:**\n  * disabled statement cache means, that you have to close statements yourself using `Conn::close`, or they\u2019ll exhaust server limits/resources;\n  * you should be aware of the [`max_prepared_stmt_count`](https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_max_prepared_stmt_count) option of the MySql server. If the number of active connections times the value of `stmt_cache_size` is greater, than you could receive an error while preparing another statement.\n\n\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#named-parameters)Named parameters\nMySql itself doesn\u2019t have named parameters support, so it\u2019s implemented on the client side. One should use `:name` as a placeholder syntax for a named parameter. Named parameters uses the following naming convention:\n  * parameter name must start with either `_` or `a..z`\n  * parameter name may continue with `_`, `a..z` and `0..9`\n\n\nNamed parameters may be repeated within the statement, e.g `SELECT :foo, :foo` will require a single named parameter `foo` that will be repeated on the corresponding positions during statement execution.\nOne should use the `params!` macro to build parameters for execution.\n**Note:** Positional and named parameters can\u2019t be mixed within the single statement.\nExamples:\n```\nlet pool = Pool::new(get_opts())?;\nlet mut conn = pool.get_conn()?;\nlet stmt = conn.prep(\"SELECT :foo, :bar, :foo\")?;\nlet foo = 42;\nlet val_13 = conn.exec_first(&stmt, params! { \"foo\" => 13, \"bar\" => foo })?.unwrap();\n// Short syntax is available when param name is the same as variable name:\nlet val_42 = conn.exec_first(&stmt, params! { foo, \"bar\" => 13 })?.unwrap();\nassert_eq!((foo, 13, foo), val_42);\nassert_eq!((13, foo, 13), val_13);\n```\n\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#buffer-pool)Buffer pool\nCrate uses the global lock-free buffer pool for the purpose of IO and data serialization/deserialization, that helps to avoid allocations for basic scenarios. You can control its characteristics using the following environment variables:\n  * `RUST_MYSQL_BUFFER_POOL_CAP` (defaults to 128) \u2013 controls the pool capacity. Dropped buffer will be immediately deallocated if the pool is full. Set it to `0` to disable the pool at runtime.\n  * `RUST_MYSQL_BUFFER_SIZE_CAP` (defaults to 4MiB) \u2013 controls the maximum capacity of a buffer stored in the pool. Capacity of a dropped buffer will be shrunk to this value when buffer is returned to the pool.\n\n\nTo completely disable the pool (say you are using jemalloc) please remove the `buffer-pool` feature from the set of default crate features (see the [Crate Features](https://docs.rs/mysql/latest/mysql/#crate-features) section).\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#binquery-and-batchquery-traits)`BinQuery` and `BatchQuery` traits.\n`BinQuery` and `BatchQuery` traits covers the set of `Queryable::exec*` methods from the perspective of a query, i.e. `BinQuery` is something, that can be performed if suitable connection is given (see [`TextQuery`](https://docs.rs/mysql/latest/mysql/#the-textquery-trait) section for the list of suitable connections).\nAs with the [`TextQuery`](https://docs.rs/mysql/latest/mysql/#the-textquery-trait) you can give away the connection and acquire `QueryResult` that satisfies `'static`.\n`BinQuery` is for prepared statements, and prepared statements requires a set of parameters, so `BinQuery` is implemented for `QueryWithParams` structure, that can be acquired, using `WithParams` trait.\nExample:\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet pool = Pool::new(get_opts())?;\nlet result: Option<(u8, u8, u8)> = \"SELECT ?, ?, ?\"\n  .with((1, 2, 3)) // <- WithParams::with will construct an instance of QueryWithParams\n  .first(&pool)?; // <- QueryWithParams is executed on the given pool\nassert_eq!(result.unwrap(), (1, 2, 3));\n```\n\nThe `BatchQuery` trait is a helper for batch statement execution. It\u2019s implemented for `QueryWithParams` where parameters is an iterator over parameters:\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet pool = Pool::new(get_opts())?;\nlet mut conn = pool.get_conn()?;\n\"CREATE TEMPORARY TABLE batch (x INT)\".run(&mut conn)?;\n\"INSERT INTO batch (x) VALUES (?)\"\n  .with((0..3).map(|x| (x,))) // <- QueryWithParams constructed with an iterator\n  .batch(&mut conn)?;     // <- batch execution is preformed here\nlet result: Vec<u8> = \"SELECT x FROM batch\".fetch(conn)?;\nassert_eq!(result, vec![0, 1, 2]);\n```\n\n#### [\u00a7](https://docs.rs/mysql/latest/mysql/#queryable)`Queryable`\nThe `Queryable` trait defines common methods for `Conn`, `PooledConn` and `Transaction`. The set of basic methods consts of:\n  * `query_iter` - basic methods to execute text query and get `QueryResult`;\n  * `prep` - basic method to prepare a statement;\n  * `exec_iter` - basic method to execute statement and get `QueryResult`;\n  * `close` - basic method to close the statement;\n\n\nThe trait also defines the set of helper methods, that is based on basic methods. These methods will consume only the first result set, other result sets will be dropped:\n  * `{query|exec}` - to collect the result into a `Vec<T: FromRow>`;\n  * `{query|exec}_first` - to get the first `T: FromRow`, if any;\n  * `{query|exec}_map` - to map each `T: FromRow` to some `U`;\n  * `{query|exec}_fold` - to fold the set of `T: FromRow` to a single value;\n  * `{query|exec}_drop` - to immediately drop the result.\n\n\nThe trait also defines the `exec_batch` function, which is a helper for batch statement execution.\n### [\u00a7](https://docs.rs/mysql/latest/mysql/#ssl-support)SSL Support\nSSL support comes in two flavors:\n  1. Based on the `native-tls` crate \u2013 native TLS backend.\nThis uses the native OS SSL/TLS provider. Enabled by the **rustls-tls** feature.\n  2. Based on the `rustls` \u2013 TLS backend written in Rust. You have three options here:\n    1. **rustls-tls** feature enables `rustls` backend with `aws-lc-rs` crypto provider\n    2. **rustls-tls-ring** feature enables `rustls` backend with `ring` crypto provider\n    3. **rustls** feature enables `rustls` backend without crypto provider \u2014 you have to install your own provider to avoid \u201cno process-level CryptoProvider available\u201d error (see relevant section of the [`rustls` crate docs](https://docs.rs/rustls))\nPlease also note a few things about **rustls** :\n     * it will fail if you\u2019ll try to connect to the server by its IP address, hostname is required;\n     * it, most likely, won\u2019t work on windows, at least with default server certs, generated by the MySql installer.\n\n\n## Modules[\u00a7](https://docs.rs/mysql/latest/mysql/#modules)\n\n[consts](https://docs.rs/mysql/latest/mysql/consts/index.html \"mod mysql::consts\")\n\n\n[error](https://docs.rs/mysql/latest/mysql/error/index.html \"mod mysql::error\")\n\n\n[params](https://docs.rs/mysql/latest/mysql/params/index.html \"mod mysql::params\")\n\n\n[prelude](https://docs.rs/mysql/latest/mysql/prelude/index.html \"mod mysql::prelude\")\n\n\n[session_state_change](https://docs.rs/mysql/latest/mysql/session_state_change/index.html \"mod mysql::session_state_change\")\n\n## Macros[\u00a7](https://docs.rs/mysql/latest/mysql/#macros)\n\n[params](https://docs.rs/mysql/latest/mysql/macro.params.html \"macro mysql::params\")\n    This macro is a convenient way to pass named parameters to a statement.\n## Structs[\u00a7](https://docs.rs/mysql/latest/mysql/#structs)\n\n[Binary](https://docs.rs/mysql/latest/mysql/struct.Binary.html \"struct mysql::Binary\")\n    Binary protocol marker.\n\n[BinlogDumpFlags](https://docs.rs/mysql/latest/mysql/struct.BinlogDumpFlags.html \"struct mysql::BinlogDumpFlags\")\n    Empty flags of a `LoadEvent`.\n\n[BinlogRequest](https://docs.rs/mysql/latest/mysql/struct.BinlogRequest.html \"struct mysql::BinlogRequest\")\n    Binlog request representation. Please consult MySql documentation.\n\n[ChangeUserOpts](https://docs.rs/mysql/latest/mysql/struct.ChangeUserOpts.html \"struct mysql::ChangeUserOpts\")\n    [`COM_CHANGE_USER`](https://dev.mysql.com/doc/c-api/5.7/en/mysql-change-user.html) options.\n\n[Column](https://docs.rs/mysql/latest/mysql/struct.Column.html \"struct mysql::Column\")\n    Represents MySql Column (column packet).\n\n[Compression](https://docs.rs/mysql/latest/mysql/struct.Compression.html \"struct mysql::Compression\")\n    When compressing data, the compression level can be specified by a value in this struct.\n\n[Conn](https://docs.rs/mysql/latest/mysql/struct.Conn.html \"struct mysql::Conn\")\n    Mysql connection.\n\n[Deserialized](https://docs.rs/mysql/latest/mysql/struct.Deserialized.html \"struct mysql::Deserialized\")\n    Use it to parse `T: Deserialize` from `Value`.\n\n[FromRowError](https://docs.rs/mysql/latest/mysql/struct.FromRowError.html \"struct mysql::FromRowError\")\n    `FromRow` conversion error.\n\n[FromValueError](https://docs.rs/mysql/latest/mysql/struct.FromValueError.html \"struct mysql::FromValueError\")\n    `FromValue` conversion error.\n\n[LocalInfile](https://docs.rs/mysql/latest/mysql/struct.LocalInfile.html \"struct mysql::LocalInfile\")\n    Local in-file stream. The callback will be passed a reference to this stream, which it should use to write the contents of the requested file. See [LocalInfileHandler](https://docs.rs/mysql/latest/mysql/struct.LocalInfileHandler.html) documentation for example.\n\n[LocalInfileHandler](https://docs.rs/mysql/latest/mysql/struct.LocalInfileHandler.html \"struct mysql::LocalInfileHandler\")\n    Callback to handle requests for local files. Consult [Mysql documentation](https://dev.mysql.com/doc/refman/5.7/en/load-data.html) for the format of local infile data.\n\n[MySqlError](https://docs.rs/mysql/latest/mysql/struct.MySqlError.html \"struct mysql::MySqlError\")\n\n\n[Opts](https://docs.rs/mysql/latest/mysql/struct.Opts.html \"struct mysql::Opts\")\n    Mysql connection options.\n\n[OptsBuilder](https://docs.rs/mysql/latest/mysql/struct.OptsBuilder.html \"struct mysql::OptsBuilder\")\n    Provides a way to build [`Opts`](https://docs.rs/mysql/latest/mysql/struct.Opts.html).\n\n[Pool](https://docs.rs/mysql/latest/mysql/struct.Pool.html \"struct mysql::Pool\")\n    Thread-safe cloneable smart pointer to a connection pool.\n\n[PoolConstraints](https://docs.rs/mysql/latest/mysql/struct.PoolConstraints.html \"struct mysql::PoolConstraints\")\n    Connection pool constraints.\n\n[PoolOpts](https://docs.rs/mysql/latest/mysql/struct.PoolOpts.html \"struct mysql::PoolOpts\")\n    Connection pool options.\n\n[PooledConn](https://docs.rs/mysql/latest/mysql/struct.PooledConn.html \"struct mysql::PooledConn\")\n    Pooled mysql connection.\n\n[QueryResult](https://docs.rs/mysql/latest/mysql/struct.QueryResult.html \"struct mysql::QueryResult\")\n    Response to a query or statement execution.\n\n[QueryWithParams](https://docs.rs/mysql/latest/mysql/struct.QueryWithParams.html \"struct mysql::QueryWithParams\")\n    Representation of a prepared statement query.\n\n[ResultSet](https://docs.rs/mysql/latest/mysql/struct.ResultSet.html \"struct mysql::ResultSet\")\n\n\n[Row](https://docs.rs/mysql/latest/mysql/struct.Row.html \"struct mysql::Row\")\n    Client side representation of a MySql row.\n\n[Serialized](https://docs.rs/mysql/latest/mysql/struct.Serialized.html \"struct mysql::Serialized\")\n    Use it to pass `T: Serialize` as JSON to a prepared statement.\n\n[SessionStateInfo](https://docs.rs/mysql/latest/mysql/struct.SessionStateInfo.html \"struct mysql::SessionStateInfo\")\n    Represents change in session state (part of MySql\u2019s Ok packet).\n\n[SetColumns](https://docs.rs/mysql/latest/mysql/struct.SetColumns.html \"struct mysql::SetColumns\")\n\n\n[SslOpts](https://docs.rs/mysql/latest/mysql/struct.SslOpts.html \"struct mysql::SslOpts\")\n    Ssl Options.\n\n[Statement](https://docs.rs/mysql/latest/mysql/struct.Statement.html \"struct mysql::Statement\")\n\n\n[Text](https://docs.rs/mysql/latest/mysql/struct.Text.html \"struct mysql::Text\")\n    Text protocol marker.\n\n[Transaction](https://docs.rs/mysql/latest/mysql/struct.Transaction.html \"struct mysql::Transaction\")\n\n\n[TxOpts](https://docs.rs/mysql/latest/mysql/struct.TxOpts.html \"struct mysql::TxOpts\")\n    MySql transaction options.\n## Enums[\u00a7](https://docs.rs/mysql/latest/mysql/#enums)\n\n[AccessMode](https://docs.rs/mysql/latest/mysql/enum.AccessMode.html \"enum mysql::AccessMode\")\n    MySql transaction access mode.\n\n[DriverError](https://docs.rs/mysql/latest/mysql/enum.DriverError.html \"enum mysql::DriverError\")\n\n\n[Error](https://docs.rs/mysql/latest/mysql/enum.Error.html \"enum mysql::Error\")\n\n\n[IsolationLevel](https://docs.rs/mysql/latest/mysql/enum.IsolationLevel.html \"enum mysql::IsolationLevel\")\n    MySql transaction isolation level.\n\n[Params](https://docs.rs/mysql/latest/mysql/enum.Params.html \"enum mysql::Params\")\n    Representations of parameters of a prepared statement.\n\n[ServerError](https://docs.rs/mysql/latest/mysql/enum.ServerError.html \"enum mysql::ServerError\")\n    Server error codes (u16)\n\n[UrlError](https://docs.rs/mysql/latest/mysql/enum.UrlError.html \"enum mysql::UrlError\")\n\n\n[Value](https://docs.rs/mysql/latest/mysql/enum.Value.html \"enum mysql::Value\")\n    Client side representation of a value of MySql column.\n## Constants[\u00a7](https://docs.rs/mysql/latest/mysql/#constants)\n\n[DEFAULT_STMT_CACHE_SIZE](https://docs.rs/mysql/latest/mysql/constant.DEFAULT_STMT_CACHE_SIZE.html \"constant mysql::DEFAULT_STMT_CACHE_SIZE\")\n    Default value for client side per-connection statement cache.\n## Functions[\u00a7](https://docs.rs/mysql/latest/mysql/#functions)\n\n[from_row](https://docs.rs/mysql/latest/mysql/fn.from_row.html \"fn mysql::from_row\")\n    Will _panic_ if could not convert `row` to `T`.\n\n[from_row_opt](https://docs.rs/mysql/latest/mysql/fn.from_row_opt.html \"fn mysql::from_row_opt\")\n    Will return `Err(row)` if could not convert `row` to `T`\n\n[from_value](https://docs.rs/mysql/latest/mysql/fn.from_value.html \"fn mysql::from_value\")\n    Will panic if could not convert `v` to `T`\n\n[from_value_opt](https://docs.rs/mysql/latest/mysql/fn.from_value_opt.html \"fn mysql::from_value_opt\")\n    Will return `Err(FromValueError(v))` if could not convert `v` to `T`\n## Type Aliases[\u00a7](https://docs.rs/mysql/latest/mysql/#types)\n\n[Result](https://docs.rs/mysql/latest/mysql/type.Result.html \"type mysql::Result\")\n\n",
        "markdown_with_citations": "[](https://docs.rs/mysql/latest/mysql/all.html \"show sidebar\")\n# Crate mysqlCopy item path\nSettings\u27e81\u27e9\nHelp\u27e82\u27e9\nSummarySource\u27e83\u27e9\nExpand description\nThis crate offers:\n  * MySql database driver in pure rust;\n  * connection pool.\n\n\nFeatures:\n  * macOS, Windows and Linux support;\n  * TLS support via **native-tls** or **rustls** (see the SSL Support\u27e84\u27e9 section);\n  * MySql text protocol support, i.e. support of simple text queries and text result sets;\n  * MySql binary protocol support, i.e. support of prepared statements and binary result sets;\n  * support of multi-result sets;\n  * support of named parameters for prepared statements (see the Named Parameters\u27e85\u27e9 section);\n  * per-connection cache of prepared statements (see the Statement Cache\u27e86\u27e9 section);\n  * buffer pool (see the Buffer Pool\u27e87\u27e9 section);\n  * support of MySql packets larger than 2^24;\n  * support of Unix sockets and Windows named pipes;\n  * support of custom LOCAL INFILE handlers;\n  * support of MySql protocol compression;\n  * support of auth plugins: \n    * **mysql_native_password** - for MySql prior to v8;\n    * **caching_sha2_password** - for MySql v8 and higher;\n    * **mysql_clear_password** - opt-in (see `Opts::get_enable_cleartext_plugin`\u27e88\u27e9.\n\n\n### \u00a7\u27e89\u27e9Installation\nPut the desired version of the crate into the `dependencies` section of your `Cargo.toml`:\n```\n[dependencies]\nmysql = \"*\"\n```\n\n### \u00a7\u27e810\u27e9Example\n```\nuse mysql::*;\nuse mysql::prelude::*;\n#[derive(Debug, PartialEq, Eq)]\nstruct Payment {\n  customer_id: i32,\n  amount: i32,\n  account_name: Option<String>,\n}\n\nfn main() -> std::result::Result<(), Box<dyn std::error::Error>> {\n  let url = \"mysql://root:password@localhost:3307/db_name\";\n  let pool = Pool::new(url)?;\n  let mut conn = pool.get_conn()?;\n  // Let's create a table for payments.\n  conn.query_drop(\n    r\"CREATE TEMPORARY TABLE payment (\n      customer_id int not null,\n      amount int not null,\n      account_name text\n    )\")?;\n  let payments = vec![\n    Payment { customer_id: 1, amount: 2, account_name: None },\n    Payment { customer_id: 3, amount: 4, account_name: Some(\"foo\".into()) },\n    Payment { customer_id: 5, amount: 6, account_name: None },\n    Payment { customer_id: 7, amount: 8, account_name: None },\n    Payment { customer_id: 9, amount: 10, account_name: Some(\"bar\".into()) },\n  ];\n  // Now let's insert payments to the database\n  conn.exec_batch(\n    r\"INSERT INTO payment (customer_id, amount, account_name)\n     VALUES (:customer_id, :amount, :account_name)\",\n    payments.iter().map(|p| params! {\n      \"customer_id\" => p.customer_id,\n      \"amount\" => p.amount,\n      \"account_name\" => &p.account_name,\n    })\n  )?;\n  // Let's select payments from database. Type inference should do the trick here.\n  let selected_payments = conn\n    .query_map(\n      \"SELECT customer_id, amount, account_name from payment\",\n      |(customer_id, amount, account_name)| {\n        Payment { customer_id, amount, account_name }\n      },\n    )?;\n  // Let's make sure, that `payments` equals to `selected_payments`.\n  // Mysql gives no guaranties on order of returned rows\n  // without `ORDER BY`, so assume we are lucky.\n  assert_eq!(payments, selected_payments);\n  println!(\"Yay!\");\n  Ok(())\n}\n```\n\n### \u00a7\u27e811\u27e9Crate Features\n  * feature sets:\n    * **default** \u2013 includes `buffer-pool` `flate2/zlib` and `derive`\n    * **default-rust** - same as `default` but with `flate2/rust_backend` instead of `flate2/zlib`\n    * **minimal** - includes `flate2/zlib` only\n    * **minimal-rust** - includes `flate2/rust_backend` only\n  * features:\n    * **buffer-pool** \u2013 enables buffer pooling (see the Buffer Pool\u27e87\u27e9 section)\n    * **derive** \u2013 reexports derive macros under `prelude` (see corresponding section\u27e812\u27e9 in the `mysql_common` documentation)\n  * TLS/SSL related features:\n    * **native-tls** \u2013 specifies `native-tls` as the TLS backend (see the SSL Support\u27e84\u27e9 section)\n    * **rustls-tls** \u2013 specifies `rustls` as the TLS backend using `aws-lc-rs` crypto provider (see the SSL Support\u27e84\u27e9 section)\n    * **rustls-tls-ring** \u2013 specifies `rustls` as the TLS backend using `ring` crypto provider (see the SSL Support\u27e84\u27e9 section)\n    * **rustls** - specifies `rustls` as the TLS backend without crypto provider (see the SSL Support\u27e84\u27e9 section)\n  * features proxied from `mysql_common`:\n    * **derive** - see this table\u27e813\u27e9.\n    * **chrono** - see this table\u27e813\u27e9.\n    * **time** - see this table\u27e813\u27e9.\n    * **bigdecimal** - see this table\u27e813\u27e9.\n    * **rust_decimal** - see this table\u27e813\u27e9.\n    * **frunk** - see this table\u27e813\u27e9.\n    * **binlog** - see this table\u27e813\u27e9.\n\n\nPlease note, that you\u2019ll need to reenable required features if you are using `default-features = false`:\n```\n[dependencies]\n# Lets say that we want to use only the `rustls-tls` feature:\nmysql = { version = \"*\", default-features = false, features = [\"minimal-rust\", \"rustls-tls\"] }\n```\n\n### \u00a7\u27e814\u27e9API Documentation\nPlease refer to the crate docs\u27e815\u27e9.\n### \u00a7\u27e816\u27e9Basic structures\n#### \u00a7\u27e817\u27e9`Opts`\nThis structure holds server host name, client username/password and other settings, that controls client behavior.\n##### \u00a7\u27e818\u27e9URL-based connection string\nNote, that you can use URL-based connection string as a source of an `Opts` instance. URL schema must be `mysql`. Host, port and credentials, as well as query parameters, should be given in accordance with the RFC 3986.\nExamples:\n```\nlet _ = Opts::from_url(\"mysql://localhost/some_db\")?;\nlet _ = Opts::from_url(\"mysql://[::1]/some_db\")?;\nlet _ = Opts::from_url(\"mysql://user:pass%20word@127.0.0.1:3307/some_db?\")?;\n```\n\nSupported URL parameters (for the meaning of each field please refer to the docs on `Opts` structure in the create API docs):\n  * `user: string` \u2013 MySql client user name\n  * `password: string` \u2013 MySql client password;\n  * `db_name: string` \u2013 MySql database name;\n  * `host: Host` \u2013 MySql server hostname/ip;\n  * `port: u16` \u2013 MySql server port;\n  * `pool_min: usize` \u2013 see `PoolConstraints::min`\u27e819\u27e9;\n  * `pool_max: usize` \u2013 see `PoolConstraints::max`\u27e820\u27e9;\n  * `prefer_socket: true | false` - see `Opts::get_prefer_socket`\u27e821\u27e9;\n  * `tcp_keepalive_time_ms: u32` - defines the value (in milliseconds) of the `tcp_keepalive_time` field in the `Opts` structure;\n  * `tcp_keepalive_probe_interval_secs: u32` - defines the value of the `tcp_keepalive_probe_interval_secs` field in the `Opts` structure;\n  * `tcp_keepalive_probe_count: u32` - defines the value of the `tcp_keepalive_probe_count` field in the `Opts` structure;\n  * `tcp_connect_timeout_ms: u64` - defines the value (in milliseconds) of the `tcp_connect_timeout` field in the `Opts` structure;\n  * `tcp_user_timeout_ms` - defines the value (in milliseconds) of the `tcp_user_timeout` field in the `Opts` structure;\n  * `stmt_cache_size: u32` - defines the value of the same field in the `Opts` structure;\n  * `enable_cleartext_plugin` \u2013 see `Opts::get_enable_cleartext_plugin`\u27e88\u27e9;\n  * `secure_auth` \u2013 see `Opts::get_secure_auth`\u27e822\u27e9;\n  * `reset_connection` \u2013 see `PoolOpts::reset_connection`\u27e823\u27e9;\n  * `check_health` \u2013 see `PoolOpts::check_health`\u27e824\u27e9;\n  * `compress` - defines the value of the same field in the `Opts` structure. Supported value are: \n    * `true` - enables compression with the default compression level;\n    * `fast` - enables compression with \u201cfast\u201d compression level;\n    * `best` - enables compression with \u201cbest\u201d compression level;\n    * `1`..`9` - enables compression with the given compression level.\n  * `socket` - socket path on UNIX, or pipe name on Windows.\n\n\n#### \u00a7\u27e825\u27e9`OptsBuilder`\nIt\u2019s a convenient builder for the `Opts` structure. It defines setters for fields of the `Opts` structure.\n```\nlet opts = OptsBuilder::new()\n  .user(Some(\"foo\"))\n  .db_name(Some(\"bar\"));\nlet _ = Conn::new(opts)?;\n```\n\n#### \u00a7\u27e826\u27e9`Conn`\nThis structure represents an active MySql connection. It also holds statement cache and metadata for the last result set.\nConn\u2019s destructor will gracefully disconnect it from the server.\n#### \u00a7\u27e827\u27e9`Transaction`\nIt\u2019s a simple wrapper on top of a routine, that starts with `START TRANSACTION` and ends with `COMMIT` or `ROLLBACK`.\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet pool = Pool::new(get_opts())?;\nlet mut conn = pool.get_conn()?;\nlet mut tx = conn.start_transaction(TxOpts::default())?;\ntx.query_drop(\"CREATE TEMPORARY TABLE tmp (TEXT a)\")?;\ntx.exec_drop(\"INSERT INTO tmp (a) VALUES (?)\", (\"foo\",))?;\nlet val: Option<String> = tx.query_first(\"SELECT a from tmp\")?;\nassert_eq!(val.unwrap(), \"foo\");\n// Note, that transaction will be rolled back implicitly on Drop, if not committed.\ntx.rollback();\nlet val: Option<String> = conn.query_first(\"SELECT a from tmp\")?;\nassert_eq!(val, None);\n```\n\n#### \u00a7\u27e828\u27e9`Pool`\nIt\u2019s a reference to a connection pool, that can be cloned and shared between threads.\n```\nuse mysql::*;\nuse mysql::prelude::*;\nuse std::thread::spawn;\nlet pool = Pool::new(get_opts())?;\nlet handles = (0..4).map(|i| {\n  spawn({\n    let pool = pool.clone();\n    move || {\n      let mut conn = pool.get_conn()?;\n      conn.exec_first::<u32, _, _>(\"SELECT ? * 10\", (i,))\n        .map(Option::unwrap)\n    }\n  })\n});\nlet result: Result<Vec<u32>> = handles.map(|handle| handle.join().unwrap()).collect();\nassert_eq!(result.unwrap(), vec![0, 10, 20, 30]);\n```\n\n#### \u00a7\u27e829\u27e9`Statement`\nStatement, actually, is just an identifier coupled with statement metadata, i.e an information about its parameters and columns. Internally the `Statement` structure also holds additional data required to support named parameters (see bellow).\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet pool = Pool::new(get_opts())?;\nlet mut conn = pool.get_conn()?;\nlet stmt = conn.prep(\"DO ?\")?;\n// The prepared statement will return no columns.\nassert!(stmt.columns().is_empty());\n// The prepared statement have one parameter.\nlet param = stmt.params().get(0).unwrap();\nassert_eq!(param.schema_str(), \"\");\nassert_eq!(param.table_str(), \"\");\nassert_eq!(param.name_str(), \"?\");\n```\n\n#### \u00a7\u27e830\u27e9`Value`\nThis enumeration represents the raw value of a MySql cell. Library offers conversion between `Value` and different rust types via `FromValue` trait described below.\n##### \u00a7\u27e831\u27e9`FromValue` trait\nThis trait is reexported from **mysql_common** create. Please refer to its crate docs\u27e832\u27e9 for the list of supported conversions.\nTrait offers conversion in two flavours:\n  * `from_value(Value) -> T` - convenient, but panicking conversion.\nNote, that for any variant of `Value` there exist a type, that fully covers its domain, i.e. for any variant of `Value` there exist `T: FromValue` such that `from_value` will never panic. This means, that if your database schema is known, then it\u2019s possible to write your application using only `from_value` with no fear of runtime panic.\n  * `from_value_opt(Value) -> Option<T>` - non-panicking, but less convenient conversion.\nThis function is useful to probe conversion in cases, where source database schema is unknown.\n\n\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet via_test_protocol: u32 = from_value(Value::Bytes(b\"65536\".to_vec()));\nlet via_bin_protocol: u32 = from_value(Value::UInt(65536));\nassert_eq!(via_test_protocol, via_bin_protocol);\nlet unknown_val = // ...\n// Maybe it is a float?\nlet unknown_val = match from_value_opt::<f64>(unknown_val) {\n  Ok(float) => {\n    println!(\"A float value: {}\", float);\n    return Ok(());\n  }\n  Err(FromValueError(unknown_val)) => unknown_val,\n};\n// Or a string?\nlet unknown_val = match from_value_opt::<String>(unknown_val) {\n  Ok(string) => {\n    println!(\"A string value: {}\", string);\n    return Ok(());\n  }\n  Err(FromValueError(unknown_val)) => unknown_val,\n};\n// Screw this, I'll simply match on it\nmatch unknown_val {\n  val @ Value::NULL => {\n    println!(\"An empty value: {:?}\", from_value::<Option<u8>>(val))\n  },\n  val @ Value::Bytes(..) => {\n    // It's non-utf8 bytes, since we already tried to convert it to String\n    println!(\"Bytes: {:?}\", from_value::<Vec<u8>>(val))\n  }\n  val @ Value::Int(..) => {\n    println!(\"A signed integer: {}\", from_value::<i64>(val))\n  }\n  val @ Value::UInt(..) => {\n    println!(\"An unsigned integer: {}\", from_value::<u64>(val))\n  }\n  Value::Float(..) => unreachable!(\"already tried\"),\n  val @ Value::Double(..) => {\n    println!(\"A double precision float value: {}\", from_value::<f64>(val))\n  }\n  val @ Value::Date(..) => {\n    use time::PrimitiveDateTime;\n    println!(\"A date value: {}\", from_value::<PrimitiveDateTime>(val))\n  }\n  val @ Value::Time(..) => {\n    use std::time::Duration;\n    println!(\"A time value: {:?}\", from_value::<Duration>(val))\n  }\n}\n```\n\n#### \u00a7\u27e833\u27e9`Row`\nInternally `Row` is a vector of `Value`s, that also allows indexing by a column name/offset, and stores row metadata. Library offers conversion between `Row` and sequences of Rust types via `FromRow` trait described below.\n##### \u00a7\u27e834\u27e9`FromRow` trait\nThis trait is reexported from **mysql_common** create. Please refer to its crate docs\u27e832\u27e9 for the list of supported conversions.\nThis conversion is based on the `FromValue` and so comes in two similar flavours:\n  * `from_row(Row) -> T` - same as `from_value`, but for rows;\n  * `from_row_opt(Row) -> Option<T>` - same as `from_value_opt`, but for rows.\n\n\n`Queryable`\u27e835\u27e9 trait offers implicit conversion for rows of a query result, that is based on this trait.\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet mut conn = Conn::new(get_opts())?;\n// Single-column row can be converted to a singular value:\nlet val: Option<String> = conn.query_first(\"SELECT 'foo'\")?;\nassert_eq!(val.unwrap(), \"foo\");\n// Example of a multi-column row conversion to an inferred type:\nlet row = conn.query_first(\"SELECT 255, 256\")?;\nassert_eq!(row, Some((255u8, 256u16)));\n// The FromRow trait does not support to-tuple conversion for rows with more than 12 columns,\n// but you can do this by hand using row indexing or `Row::take` method:\nlet row: Row = conn.exec_first(\"select 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12\", ())?.unwrap();\nfor i in 0..row.len() {\n  assert_eq!(row[i], Value::Int(i as i64));\n}\n// Another way to handle wide rows is to use HList (requires `mysql_common/frunk` feature)\nuse frunk::{HList, hlist, hlist_pat};\nlet query = \"select 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15\";\ntype RowType = HList!(u8, u16, u32, u8, u8, u8, u8, u8, u8, u8, u8, u8, u8, u8, u8, u8);\nlet first_three_columns = conn.query_map(query, |row: RowType| {\n  // do something with the row (see the `frunk` crate documentation)\n  let hlist_pat![c1, c2, c3, ...] = row;\n  (c1, c2, c3)\n});\nassert_eq!(first_three_columns.unwrap(), vec![(0_u8, 1_u16, 2_u32)]);\n// Some unknown row\nlet row: Row = conn.query_first(\n  // ...\n)?.unwrap();\nfor column in row.columns_ref() {\n  // Cells in a row can be indexed by numeric index or by column name\n  let column_value = &row[column.name_str().as_ref()];\n  println!(\n    \"Column {} of type {:?} with value {:?}\",\n    column.name_str(),\n    column.column_type(),\n    column_value,\n  );\n}\n```\n\n#### \u00a7\u27e836\u27e9`Params`\nRepresents parameters of a prepared statement, but this type won\u2019t appear directly in your code because binary protocol API will ask for `T: Into<Params>`, where `Into<Params>` is implemented:\n  * for tuples of `Into<Value>` types up to arity 12;\n**Note:** singular tuple requires extra comma, e.g. `(\"foo\",)`;\n  * for `IntoIterator<Item: Into<Value>>` for cases, when your statement takes more than 12 parameters;\n  * for named parameters representation (the value of the `params!` macro, described below).\n\n\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet mut conn = Conn::new(get_opts())?;\n// Singular tuple requires extra comma:\nlet row: Option<u8> = conn.exec_first(\"SELECT ?\", (0,))?;\nassert_eq!(row.unwrap(), 0);\n// More than 12 parameters:\nlet row: Option<u8> = conn.exec_first(\n  \"SELECT CONVERT(? + ? + ? + ? + ? + ? + ? + ? + ? + ? + ? + ? + ? + ? + ? + ?, UNSIGNED)\",\n  (0..16).collect::<Vec<_>>(),\n)?;\nassert_eq!(row.unwrap(), 120);\n```\n\n**Note:** Please refer to the **mysql_common** crate docs\u27e832\u27e9 for the list of types, that implements `Into<Value>`.\n##### \u00a7\u27e837\u27e9`Serialized`, `Deserialized`\nWrapper structures for cases, when you need to provide a value for a JSON cell, or when you need to parse JSON cell as a struct.\n```\nuse mysql::*;\nuse mysql::prelude::*;\nuse serde::{Deserialize, Serialize};\n/// Serializable structure.\n#[derive(Debug, PartialEq, Serialize, Deserialize)]\nstruct Example {\n  foo: u32,\n}\n// Value::from for Serialized will emit json string.\nlet value = Value::from(Serialized(Example { foo: 42 }));\nassert_eq!(value, Value::Bytes(br#\"{\"foo\":42}\"#.to_vec()));\n// from_value for Deserialized will parse json string.\nlet structure: Deserialized<Example> = from_value(value);\nassert_eq!(structure, Deserialized(Example { foo: 42 }));\n```\n\n#### \u00a7\u27e838\u27e9`QueryResult`\u27e839\u27e9\nIt\u2019s an iterator over rows of a query result with support of multi-result sets. It\u2019s intended for cases when you need full control during result set iteration. For other cases `Queryable`\u27e835\u27e9 provides a set of methods that will immediately consume the first result set and drop everything else.\nThis iterator is lazy so it won\u2019t read the result from server until you iterate over it. MySql protocol is strictly sequential, so `Conn` will be mutably borrowed until the result is fully consumed (please also look at `QueryResult::iter`\u27e840\u27e9 docs).\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet mut conn = Conn::new(get_opts())?;\n// This query will emit two result sets.\nlet mut result = conn.query_iter(\"SELECT 1, 2; SELECT 3, 3.14;\")?;\nlet mut sets = 0;\nwhile let Some(result_set) = result.iter() {\n  sets += 1;\n  println!(\"Result set columns: {:?}\", result_set.columns());\n  println!(\n    \"Result set meta: {}, {:?}, {} {}\",\n    result_set.affected_rows(),\n    result_set.last_insert_id(),\n    result_set.warnings(),\n    result_set.info_str(),\n  );\n  for row in result_set {\n    match sets {\n      1 => {\n        // First result set will contain two numbers.\n        assert_eq!((1_u8, 2_u8), from_row(row?));\n      }\n      2 => {\n        // Second result set will contain a number and a float.\n        assert_eq!((3_u8, 3.14), from_row(row?));\n      }\n      _ => unreachable!(),\n    }\n  }\n}\nassert_eq!(sets, 2);\n```\n\n### \u00a7\u27e841\u27e9Text protocol\nMySql text protocol is implemented in the set of `Queryable::query*` methods. It\u2019s useful when your query doesn\u2019t have parameters.\n**Note:** All values of a text protocol result set will be encoded as strings by the server, so `from_value` conversion may lead to additional parsing costs.\nExamples:\n```\nlet pool = Pool::new(get_opts())?;\nlet val = pool.get_conn()?.query_first(\"SELECT POW(2, 16)\")?;\n// Text protocol returns bytes even though the result of POW\n// is actually a floating point number.\nassert_eq!(val, Some(Value::Bytes(\"65536\".as_bytes().to_vec())));\n```\n\n#### \u00a7\u27e842\u27e9The `TextQuery` trait.\nThe `TextQuery` trait covers the set of `Queryable::query*` methods from the perspective of a query, i.e. `TextQuery` is something, that can be performed if suitable connection is given. Suitable connections are:\n  * `&Pool`\n  * `Conn`\n  * `PooledConn`\n  * `&mut Conn`\n  * `&mut PooledConn`\n  * `&mut Transaction`\n\n\nThe unique characteristic of this trait, is that you can give away the connection and thus produce `QueryResult` that satisfies `'static`:\n```\nuse mysql::*;\nuse mysql::prelude::*;\nfn iter(pool: &Pool) -> Result<impl Iterator<Item=Result<u32>>> {\n  let result = \"SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3\".run(pool)?;\n  Ok(result.map(|row| row.map(from_row)))\n}\nlet pool = Pool::new(get_opts())?;\nlet it = iter(&pool)?;\nassert_eq!(it.collect::<Result<Vec<u32>>>()?, vec![1, 2, 3]);\n```\n\n### \u00a7\u27e843\u27e9Binary protocol and prepared statements.\nMySql binary protocol is implemented in `prep`, `close` and the set of `exec*` methods, defined on the `Queryable`\u27e835\u27e9 trait. Prepared statements is the only way to pass rust value to the MySql server. MySql uses `?` symbol as a parameter placeholder and it\u2019s only possible to use parameters where a single MySql value is expected. For example:\n```\nlet pool = Pool::new(get_opts())?;\nlet val = pool.get_conn()?.exec_first(\"SELECT POW(?, ?)\", (2, 16))?;\nassert_eq!(val, Some(Value::Double(65536.0)));\n```\n\n#### \u00a7\u27e844\u27e9Statements\nIn MySql each prepared statement belongs to a particular connection and can\u2019t be executed on another connection. Trying to do so will lead to an error. The driver won\u2019t tie statement to its connection in any way, but one can look on to the connection id, contained in the `Statement` structure.\n```\nlet pool = Pool::new(get_opts())?;\nlet mut conn_1 = pool.get_conn()?;\nlet mut conn_2 = pool.get_conn()?;\nlet stmt_1 = conn_1.prep(\"SELECT ?\")?;\n// stmt_1 is for the conn_1, ..\nassert!(stmt_1.connection_id() == conn_1.connection_id());\nassert!(stmt_1.connection_id() != conn_2.connection_id());\n// .. so stmt_1 will execute only on conn_1\nassert!(conn_1.exec_drop(&stmt_1, (\"foo\",)).is_ok());\nassert!(conn_2.exec_drop(&stmt_1, (\"foo\",)).is_err());\n```\n\n#### \u00a7\u27e86\u27e9Statement cache\n##### \u00a7\u27e845\u27e9Note\nStatement cache only works for:\n  1. for raw `Conn`\u27e846\u27e9\n  2. for `PooledConn`\u27e847\u27e9: \n     * within its lifetime if `PoolOpts::reset_connection`\u27e823\u27e9 is `true`\n     * within the lifetime of a wrapped `Conn`\u27e846\u27e9 if `PoolOpts::reset_connection`\u27e823\u27e9 is `false`\n\n\n##### \u00a7\u27e848\u27e9Description\n`Conn` will manage the cache of prepared statements on the client side, so subsequent calls to prepare with the same statement won\u2019t lead to a client-server roundtrip. Cache size for each connection is determined by the `stmt_cache_size` field of the `Opts` structure. Statements, that are out of this boundary will be closed in LRU order.\nStatement cache is completely disabled if `stmt_cache_size` is zero.\n**Caveats:**\n  * disabled statement cache means, that you have to close statements yourself using `Conn::close`, or they\u2019ll exhaust server limits/resources;\n  * you should be aware of the `max_prepared_stmt_count`\u27e849\u27e9 option of the MySql server. If the number of active connections times the value of `stmt_cache_size` is greater, than you could receive an error while preparing another statement.\n\n\n#### \u00a7\u27e85\u27e9Named parameters\nMySql itself doesn\u2019t have named parameters support, so it\u2019s implemented on the client side. One should use `:name` as a placeholder syntax for a named parameter. Named parameters uses the following naming convention:\n  * parameter name must start with either `_` or `a..z`\n  * parameter name may continue with `_`, `a..z` and `0..9`\n\n\nNamed parameters may be repeated within the statement, e.g `SELECT :foo, :foo` will require a single named parameter `foo` that will be repeated on the corresponding positions during statement execution.\nOne should use the `params!` macro to build parameters for execution.\n**Note:** Positional and named parameters can\u2019t be mixed within the single statement.\nExamples:\n```\nlet pool = Pool::new(get_opts())?;\nlet mut conn = pool.get_conn()?;\nlet stmt = conn.prep(\"SELECT :foo, :bar, :foo\")?;\nlet foo = 42;\nlet val_13 = conn.exec_first(&stmt, params! { \"foo\" => 13, \"bar\" => foo })?.unwrap();\n// Short syntax is available when param name is the same as variable name:\nlet val_42 = conn.exec_first(&stmt, params! { foo, \"bar\" => 13 })?.unwrap();\nassert_eq!((foo, 13, foo), val_42);\nassert_eq!((13, foo, 13), val_13);\n```\n\n#### \u00a7\u27e87\u27e9Buffer pool\nCrate uses the global lock-free buffer pool for the purpose of IO and data serialization/deserialization, that helps to avoid allocations for basic scenarios. You can control its characteristics using the following environment variables:\n  * `RUST_MYSQL_BUFFER_POOL_CAP` (defaults to 128) \u2013 controls the pool capacity. Dropped buffer will be immediately deallocated if the pool is full. Set it to `0` to disable the pool at runtime.\n  * `RUST_MYSQL_BUFFER_SIZE_CAP` (defaults to 4MiB) \u2013 controls the maximum capacity of a buffer stored in the pool. Capacity of a dropped buffer will be shrunk to this value when buffer is returned to the pool.\n\n\nTo completely disable the pool (say you are using jemalloc) please remove the `buffer-pool` feature from the set of default crate features (see the Crate Features\u27e811\u27e9 section).\n#### \u00a7\u27e850\u27e9`BinQuery` and `BatchQuery` traits.\n`BinQuery` and `BatchQuery` traits covers the set of `Queryable::exec*` methods from the perspective of a query, i.e. `BinQuery` is something, that can be performed if suitable connection is given (see `TextQuery`\u27e842\u27e9 section for the list of suitable connections).\nAs with the `TextQuery`\u27e842\u27e9 you can give away the connection and acquire `QueryResult` that satisfies `'static`.\n`BinQuery` is for prepared statements, and prepared statements requires a set of parameters, so `BinQuery` is implemented for `QueryWithParams` structure, that can be acquired, using `WithParams` trait.\nExample:\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet pool = Pool::new(get_opts())?;\nlet result: Option<(u8, u8, u8)> = \"SELECT ?, ?, ?\"\n  .with((1, 2, 3)) // <- WithParams::with will construct an instance of QueryWithParams\n  .first(&pool)?; // <- QueryWithParams is executed on the given pool\nassert_eq!(result.unwrap(), (1, 2, 3));\n```\n\nThe `BatchQuery` trait is a helper for batch statement execution. It\u2019s implemented for `QueryWithParams` where parameters is an iterator over parameters:\n```\nuse mysql::*;\nuse mysql::prelude::*;\nlet pool = Pool::new(get_opts())?;\nlet mut conn = pool.get_conn()?;\n\"CREATE TEMPORARY TABLE batch (x INT)\".run(&mut conn)?;\n\"INSERT INTO batch (x) VALUES (?)\"\n  .with((0..3).map(|x| (x,))) // <- QueryWithParams constructed with an iterator\n  .batch(&mut conn)?;     // <- batch execution is preformed here\nlet result: Vec<u8> = \"SELECT x FROM batch\".fetch(conn)?;\nassert_eq!(result, vec![0, 1, 2]);\n```\n\n#### \u00a7\u27e835\u27e9`Queryable`\nThe `Queryable` trait defines common methods for `Conn`, `PooledConn` and `Transaction`. The set of basic methods consts of:\n  * `query_iter` - basic methods to execute text query and get `QueryResult`;\n  * `prep` - basic method to prepare a statement;\n  * `exec_iter` - basic method to execute statement and get `QueryResult`;\n  * `close` - basic method to close the statement;\n\n\nThe trait also defines the set of helper methods, that is based on basic methods. These methods will consume only the first result set, other result sets will be dropped:\n  * `{query|exec}` - to collect the result into a `Vec<T: FromRow>`;\n  * `{query|exec}_first` - to get the first `T: FromRow`, if any;\n  * `{query|exec}_map` - to map each `T: FromRow` to some `U`;\n  * `{query|exec}_fold` - to fold the set of `T: FromRow` to a single value;\n  * `{query|exec}_drop` - to immediately drop the result.\n\n\nThe trait also defines the `exec_batch` function, which is a helper for batch statement execution.\n### \u00a7\u27e84\u27e9SSL Support\nSSL support comes in two flavors:\n  1. Based on the `native-tls` crate \u2013 native TLS backend.\nThis uses the native OS SSL/TLS provider. Enabled by the **rustls-tls** feature.\n  2. Based on the `rustls` \u2013 TLS backend written in Rust. You have three options here:\n    1. **rustls-tls** feature enables `rustls` backend with `aws-lc-rs` crypto provider\n    2. **rustls-tls-ring** feature enables `rustls` backend with `ring` crypto provider\n    3. **rustls** feature enables `rustls` backend without crypto provider \u2014 you have to install your own provider to avoid \u201cno process-level CryptoProvider available\u201d error (see relevant section of the `rustls` crate docs\u27e851\u27e9)\nPlease also note a few things about **rustls** :\n     * it will fail if you\u2019ll try to connect to the server by its IP address, hostname is required;\n     * it, most likely, won\u2019t work on windows, at least with default server certs, generated by the MySql installer.\n\n\n## Modules\u00a7\u27e852\u27e9\n\nconsts\u27e853\u27e9\n\n\nerror\u27e854\u27e9\n\n\nparams\u27e855\u27e9\n\n\nprelude\u27e856\u27e9\n\n\nsession_state_change\u27e857\u27e9\n\n## Macros\u00a7\u27e858\u27e9\n\nparams\u27e859\u27e9\n    This macro is a convenient way to pass named parameters to a statement.\n## Structs\u00a7\u27e860\u27e9\n\nBinary\u27e861\u27e9\n    Binary protocol marker.\n\nBinlogDumpFlags\u27e862\u27e9\n    Empty flags of a `LoadEvent`.\n\nBinlogRequest\u27e863\u27e9\n    Binlog request representation. Please consult MySql documentation.\n\nChangeUserOpts\u27e864\u27e9\n    `COM_CHANGE_USER`\u27e865\u27e9 options.\n\nColumn\u27e866\u27e9\n    Represents MySql Column (column packet).\n\nCompression\u27e867\u27e9\n    When compressing data, the compression level can be specified by a value in this struct.\n\nConn\u27e846\u27e9\n    Mysql connection.\n\nDeserialized\u27e868\u27e9\n    Use it to parse `T: Deserialize` from `Value`.\n\nFromRowError\u27e869\u27e9\n    `FromRow` conversion error.\n\nFromValueError\u27e870\u27e9\n    `FromValue` conversion error.\n\nLocalInfile\u27e871\u27e9\n    Local in-file stream. The callback will be passed a reference to this stream, which it should use to write the contents of the requested file. See LocalInfileHandler\u27e872\u27e9 documentation for example.\n\nLocalInfileHandler\u27e872\u27e9\n    Callback to handle requests for local files. Consult Mysql documentation\u27e873\u27e9 for the format of local infile data.\n\nMySqlError\u27e874\u27e9\n\n\nOpts\u27e875\u27e9\n    Mysql connection options.\n\nOptsBuilder\u27e876\u27e9\n    Provides a way to build `Opts`\u27e875\u27e9.\n\nPool\u27e877\u27e9\n    Thread-safe cloneable smart pointer to a connection pool.\n\nPoolConstraints\u27e878\u27e9\n    Connection pool constraints.\n\nPoolOpts\u27e879\u27e9\n    Connection pool options.\n\nPooledConn\u27e847\u27e9\n    Pooled mysql connection.\n\nQueryResult\u27e839\u27e9\n    Response to a query or statement execution.\n\nQueryWithParams\u27e880\u27e9\n    Representation of a prepared statement query.\n\nResultSet\u27e881\u27e9\n\n\nRow\u27e882\u27e9\n    Client side representation of a MySql row.\n\nSerialized\u27e883\u27e9\n    Use it to pass `T: Serialize` as JSON to a prepared statement.\n\nSessionStateInfo\u27e884\u27e9\n    Represents change in session state (part of MySql\u2019s Ok packet).\n\nSetColumns\u27e885\u27e9\n\n\nSslOpts\u27e886\u27e9\n    Ssl Options.\n\nStatement\u27e887\u27e9\n\n\nText\u27e888\u27e9\n    Text protocol marker.\n\nTransaction\u27e889\u27e9\n\n\nTxOpts\u27e890\u27e9\n    MySql transaction options.\n## Enums\u00a7\u27e891\u27e9\n\nAccessMode\u27e892\u27e9\n    MySql transaction access mode.\n\nDriverError\u27e893\u27e9\n\n\nError\u27e894\u27e9\n\n\nIsolationLevel\u27e895\u27e9\n    MySql transaction isolation level.\n\nParams\u27e896\u27e9\n    Representations of parameters of a prepared statement.\n\nServerError\u27e897\u27e9\n    Server error codes (u16)\n\nUrlError\u27e898\u27e9\n\n\nValue\u27e899\u27e9\n    Client side representation of a value of MySql column.\n## Constants\u00a7\u27e8100\u27e9\n\nDEFAULT_STMT_CACHE_SIZE\u27e8101\u27e9\n    Default value for client side per-connection statement cache.\n## Functions\u00a7\u27e8102\u27e9\n\nfrom_row\u27e8103\u27e9\n    Will _panic_ if could not convert `row` to `T`.\n\nfrom_row_opt\u27e8104\u27e9\n    Will return `Err(row)` if could not convert `row` to `T`\n\nfrom_value\u27e8105\u27e9\n    Will panic if could not convert `v` to `T`\n\nfrom_value_opt\u27e8106\u27e9\n    Will return `Err(FromValueError(v))` if could not convert `v` to `T`\n## Type Aliases\u00a7\u27e8107\u27e9\n\nResult\u27e8108\u27e9\n\n",
        "references_markdown": "\n\n## References\n\n\u27e81\u27e9 https://docs.rs/mysql/latest/settings.html: Settings\n\u27e82\u27e9 https://docs.rs/mysql/latest/help.html: Help\n\u27e83\u27e9 https://docs.rs/mysql/latest/src/mysql/lib.rs.html#9-1086: Source\n\u27e84\u27e9 https://docs.rs/mysql/latest/mysql/#ssl-support: SSL Support\n\u27e85\u27e9 https://docs.rs/mysql/latest/mysql/#named-parameters: Named Parameters\n\u27e86\u27e9 https://docs.rs/mysql/latest/mysql/#statement-cache: Statement Cache\n\u27e87\u27e9 https://docs.rs/mysql/latest/mysql/#buffer-pool: Buffer Pool\n\u27e88\u27e9 https://docs.rs/mysql/latest/mysql/struct.Opts.html#method.get_enable_cleartext_plugin: method mysql::Opts::get_enable_cleartext_plugin - `Opts::get_enable_cleartext_plugin`\n\u27e89\u27e9 https://docs.rs/mysql/latest/mysql/#installation: \u00a7\n\u27e810\u27e9 https://docs.rs/mysql/latest/mysql/#example: \u00a7\n\u27e811\u27e9 https://docs.rs/mysql/latest/mysql/#crate-features: \u00a7\n\u27e812\u27e9 https://docs.rs/mysql_common/latest/mysql_common/#derive-macros: corresponding section\n\u27e813\u27e9 https://docs.rs/mysql_common/latest/mysql_common/#crate-features: this table\n\u27e814\u27e9 https://docs.rs/mysql/latest/mysql/#api-documentation: \u00a7\n\u27e815\u27e9 https://docs.rs/mysql: crate docs\n\u27e816\u27e9 https://docs.rs/mysql/latest/mysql/#basic-structures: \u00a7\n\u27e817\u27e9 https://docs.rs/mysql/latest/mysql/#opts: \u00a7\n\u27e818\u27e9 https://docs.rs/mysql/latest/mysql/#url-based-connection-string: \u00a7\n\u27e819\u27e9 https://docs.rs/mysql/latest/mysql/struct.PoolConstraints.html#method.min: method mysql::PoolConstraints::min - `PoolConstraints::min`\n\u27e820\u27e9 https://docs.rs/mysql/latest/mysql/struct.PoolConstraints.html#method.max: method mysql::PoolConstraints::max - `PoolConstraints::max`\n\u27e821\u27e9 https://docs.rs/mysql/latest/mysql/struct.Opts.html#method.get_prefer_socket: method mysql::Opts::get_prefer_socket - `Opts::get_prefer_socket`\n\u27e822\u27e9 https://docs.rs/mysql/latest/mysql/struct.Opts.html#method.get_secure_auth: method mysql::Opts::get_secure_auth - `Opts::get_secure_auth`\n\u27e823\u27e9 https://docs.rs/mysql/latest/mysql/struct.PoolOpts.html#method.reset_connection: method mysql::PoolOpts::reset_connection - `PoolOpts::reset_connection`\n\u27e824\u27e9 https://docs.rs/mysql/latest/mysql/struct.PoolOpts.html#method.check_health: method mysql::PoolOpts::check_health - `PoolOpts::check_health`\n\u27e825\u27e9 https://docs.rs/mysql/latest/mysql/#optsbuilder: \u00a7\n\u27e826\u27e9 https://docs.rs/mysql/latest/mysql/#conn: \u00a7\n\u27e827\u27e9 https://docs.rs/mysql/latest/mysql/#transaction: \u00a7\n\u27e828\u27e9 https://docs.rs/mysql/latest/mysql/#pool: \u00a7\n\u27e829\u27e9 https://docs.rs/mysql/latest/mysql/#statement: \u00a7\n\u27e830\u27e9 https://docs.rs/mysql/latest/mysql/#value: \u00a7\n\u27e831\u27e9 https://docs.rs/mysql/latest/mysql/#fromvalue-trait: \u00a7\n\u27e832\u27e9 https://docs.rs/mysql_common: crate docs\n\u27e833\u27e9 https://docs.rs/mysql/latest/mysql/#row: \u00a7\n\u27e834\u27e9 https://docs.rs/mysql/latest/mysql/#fromrow-trait: \u00a7\n\u27e835\u27e9 https://docs.rs/mysql/latest/mysql/#queryable: `Queryable`\n\u27e836\u27e9 https://docs.rs/mysql/latest/mysql/#params: \u00a7\n\u27e837\u27e9 https://docs.rs/mysql/latest/mysql/#serialized-deserialized: \u00a7\n\u27e838\u27e9 https://docs.rs/mysql/latest/mysql/#queryresult: \u00a7\n\u27e839\u27e9 https://docs.rs/mysql/latest/mysql/struct.QueryResult.html: struct mysql::QueryResult - `QueryResult`\n\u27e840\u27e9 https://docs.rs/mysql/latest/mysql/struct.QueryResult.html#method.iter: method mysql::QueryResult::iter - `QueryResult::iter`\n\u27e841\u27e9 https://docs.rs/mysql/latest/mysql/#text-protocol: \u00a7\n\u27e842\u27e9 https://docs.rs/mysql/latest/mysql/#the-textquery-trait: \u00a7\n\u27e843\u27e9 https://docs.rs/mysql/latest/mysql/#binary-protocol-and-prepared-statements: \u00a7\n\u27e844\u27e9 https://docs.rs/mysql/latest/mysql/#statements: \u00a7\n\u27e845\u27e9 https://docs.rs/mysql/latest/mysql/#note: \u00a7\n\u27e846\u27e9 https://docs.rs/mysql/latest/mysql/struct.Conn.html: struct mysql::Conn - `Conn`\n\u27e847\u27e9 https://docs.rs/mysql/latest/mysql/struct.PooledConn.html: struct mysql::PooledConn - `PooledConn`\n\u27e848\u27e9 https://docs.rs/mysql/latest/mysql/#description: \u00a7\n\u27e849\u27e9 https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_max_prepared_stmt_count: `max_prepared_stmt_count`\n\u27e850\u27e9 https://docs.rs/mysql/latest/mysql/#binquery-and-batchquery-traits: \u00a7\n\u27e851\u27e9 https://docs.rs/rustls: `rustls` crate docs\n\u27e852\u27e9 https://docs.rs/mysql/latest/mysql/#modules: \u00a7\n\u27e853\u27e9 https://docs.rs/mysql/latest/mysql/consts/index.html: mod mysql::consts - consts\n\u27e854\u27e9 https://docs.rs/mysql/latest/mysql/error/index.html: mod mysql::error - error\n\u27e855\u27e9 https://docs.rs/mysql/latest/mysql/params/index.html: mod mysql::params - params\n\u27e856\u27e9 https://docs.rs/mysql/latest/mysql/prelude/index.html: mod mysql::prelude - prelude\n\u27e857\u27e9 https://docs.rs/mysql/latest/mysql/session_state_change/index.html: mod mysql::session_state_change - session_state_change\n\u27e858\u27e9 https://docs.rs/mysql/latest/mysql/#macros: \u00a7\n\u27e859\u27e9 https://docs.rs/mysql/latest/mysql/macro.params.html: macro mysql::params - params\n\u27e860\u27e9 https://docs.rs/mysql/latest/mysql/#structs: \u00a7\n\u27e861\u27e9 https://docs.rs/mysql/latest/mysql/struct.Binary.html: struct mysql::Binary - Binary\n\u27e862\u27e9 https://docs.rs/mysql/latest/mysql/struct.BinlogDumpFlags.html: struct mysql::BinlogDumpFlags - BinlogDumpFlags\n\u27e863\u27e9 https://docs.rs/mysql/latest/mysql/struct.BinlogRequest.html: struct mysql::BinlogRequest - BinlogRequest\n\u27e864\u27e9 https://docs.rs/mysql/latest/mysql/struct.ChangeUserOpts.html: struct mysql::ChangeUserOpts - ChangeUserOpts\n\u27e865\u27e9 https://dev.mysql.com/doc/c-api/5.7/en/mysql-change-user.html: `COM_CHANGE_USER`\n\u27e866\u27e9 https://docs.rs/mysql/latest/mysql/struct.Column.html: struct mysql::Column - Column\n\u27e867\u27e9 https://docs.rs/mysql/latest/mysql/struct.Compression.html: struct mysql::Compression - Compression\n\u27e868\u27e9 https://docs.rs/mysql/latest/mysql/struct.Deserialized.html: struct mysql::Deserialized - Deserialized\n\u27e869\u27e9 https://docs.rs/mysql/latest/mysql/struct.FromRowError.html: struct mysql::FromRowError - FromRowError\n\u27e870\u27e9 https://docs.rs/mysql/latest/mysql/struct.FromValueError.html: struct mysql::FromValueError - FromValueError\n\u27e871\u27e9 https://docs.rs/mysql/latest/mysql/struct.LocalInfile.html: struct mysql::LocalInfile - LocalInfile\n\u27e872\u27e9 https://docs.rs/mysql/latest/mysql/struct.LocalInfileHandler.html: LocalInfileHandler\n\u27e873\u27e9 https://dev.mysql.com/doc/refman/5.7/en/load-data.html: Mysql documentation\n\u27e874\u27e9 https://docs.rs/mysql/latest/mysql/struct.MySqlError.html: struct mysql::MySqlError - MySqlError\n\u27e875\u27e9 https://docs.rs/mysql/latest/mysql/struct.Opts.html: struct mysql::Opts - Opts\n\u27e876\u27e9 https://docs.rs/mysql/latest/mysql/struct.OptsBuilder.html: struct mysql::OptsBuilder - OptsBuilder\n\u27e877\u27e9 https://docs.rs/mysql/latest/mysql/struct.Pool.html: struct mysql::Pool - Pool\n\u27e878\u27e9 https://docs.rs/mysql/latest/mysql/struct.PoolConstraints.html: struct mysql::PoolConstraints - PoolConstraints\n\u27e879\u27e9 https://docs.rs/mysql/latest/mysql/struct.PoolOpts.html: struct mysql::PoolOpts - PoolOpts\n\u27e880\u27e9 https://docs.rs/mysql/latest/mysql/struct.QueryWithParams.html: struct mysql::QueryWithParams - QueryWithParams\n\u27e881\u27e9 https://docs.rs/mysql/latest/mysql/struct.ResultSet.html: struct mysql::ResultSet - ResultSet\n\u27e882\u27e9 https://docs.rs/mysql/latest/mysql/struct.Row.html: struct mysql::Row - Row\n\u27e883\u27e9 https://docs.rs/mysql/latest/mysql/struct.Serialized.html: struct mysql::Serialized - Serialized\n\u27e884\u27e9 https://docs.rs/mysql/latest/mysql/struct.SessionStateInfo.html: struct mysql::SessionStateInfo - SessionStateInfo\n\u27e885\u27e9 https://docs.rs/mysql/latest/mysql/struct.SetColumns.html: struct mysql::SetColumns - SetColumns\n\u27e886\u27e9 https://docs.rs/mysql/latest/mysql/struct.SslOpts.html: struct mysql::SslOpts - SslOpts\n\u27e887\u27e9 https://docs.rs/mysql/latest/mysql/struct.Statement.html: struct mysql::Statement - Statement\n\u27e888\u27e9 https://docs.rs/mysql/latest/mysql/struct.Text.html: struct mysql::Text - Text\n\u27e889\u27e9 https://docs.rs/mysql/latest/mysql/struct.Transaction.html: struct mysql::Transaction - Transaction\n\u27e890\u27e9 https://docs.rs/mysql/latest/mysql/struct.TxOpts.html: struct mysql::TxOpts - TxOpts\n\u27e891\u27e9 https://docs.rs/mysql/latest/mysql/#enums: \u00a7\n\u27e892\u27e9 https://docs.rs/mysql/latest/mysql/enum.AccessMode.html: enum mysql::AccessMode - AccessMode\n\u27e893\u27e9 https://docs.rs/mysql/latest/mysql/enum.DriverError.html: enum mysql::DriverError - DriverError\n\u27e894\u27e9 https://docs.rs/mysql/latest/mysql/enum.Error.html: enum mysql::Error - Error\n\u27e895\u27e9 https://docs.rs/mysql/latest/mysql/enum.IsolationLevel.html: enum mysql::IsolationLevel - IsolationLevel\n\u27e896\u27e9 https://docs.rs/mysql/latest/mysql/enum.Params.html: enum mysql::Params - Params\n\u27e897\u27e9 https://docs.rs/mysql/latest/mysql/enum.ServerError.html: enum mysql::ServerError - ServerError\n\u27e898\u27e9 https://docs.rs/mysql/latest/mysql/enum.UrlError.html: enum mysql::UrlError - UrlError\n\u27e899\u27e9 https://docs.rs/mysql/latest/mysql/enum.Value.html: enum mysql::Value - Value\n\u27e8100\u27e9 https://docs.rs/mysql/latest/mysql/#constants: \u00a7\n\u27e8101\u27e9 https://docs.rs/mysql/latest/mysql/constant.DEFAULT_STMT_CACHE_SIZE.html: constant mysql::DEFAULT_STMT_CACHE_SIZE - DEFAULT_STMT_CACHE_SIZE\n\u27e8102\u27e9 https://docs.rs/mysql/latest/mysql/#functions: \u00a7\n\u27e8103\u27e9 https://docs.rs/mysql/latest/mysql/fn.from_row.html: fn mysql::from_row - from_row\n\u27e8104\u27e9 https://docs.rs/mysql/latest/mysql/fn.from_row_opt.html: fn mysql::from_row_opt - from_row_opt\n\u27e8105\u27e9 https://docs.rs/mysql/latest/mysql/fn.from_value.html: fn mysql::from_value - from_value\n\u27e8106\u27e9 https://docs.rs/mysql/latest/mysql/fn.from_value_opt.html: fn mysql::from_value_opt - from_value_opt\n\u27e8107\u27e9 https://docs.rs/mysql/latest/mysql/#types: \u00a7\n\u27e8108\u27e9 https://docs.rs/mysql/latest/mysql/type.Result.html: type mysql::Result - Result\n",
        "fit_markdown": "",
        "fit_html": ""
    },
    "downloads": 0,
    "github_stars": 0,
    "dependencies": [],
    "features": {},
    "code_snippets": [],
    "readme_sections": {},
    "librs_downloads": null,
    "source": "crates.io",
    "enhanced_scraping": {},
    "enhanced_features": [],
    "enhanced_dependencies": [],
    "readme_summary": "The `mysql` crate is a pure Rust MySQL database driver offering cross-platform support for macOS, Windows, and Linux. It features connection pooling, support for MySQL's text and binary protocols (including prepared statements and named parameters), TLS/SSL options via `native-tls` or `rustls`, statement caching, protocol compression, and custom `LOCAL INFILE` handlers. It also supports multi-result sets, large packets, and various authentication plugins.",
    "feature_summary": null,
    "use_case": "Database",
    "score": 6.0,
    "factual_counterfactual": "### Pair 1: Connection Pooling\n\u2705 Factual: The `mysql` crate provides a thread-safe connection pool that can be cloned and shared between threads, enabling efficient reuse of database connections.\n\u274c Counterfactual: The `mysql` crate requires creating a new connection for each query, as it does not support connection pooling.\n\n---\n\n### Pair 2: Named Parameters in Prepared Statements\n\u2705 Factual: The `mysql` crate supports named parameters in prepared statements, allowing developers to use placeholders like `:name` for parameterized queries.\n\u274c Counterfactual: The `mysql` crate only supports positional parameters in prepared statements and does not allow named placeholders.\n\n---\n\n### Pair 3: SSL/TLS Support\n\u2705 Factual: The `mysql` crate supports SSL/TLS connections using either `native-tls` or `rustls`, with options for different crypto providers like `ring` or `aws-lc-rs`.\n\u274c Counterfactual: The `mysql` crate does not support SSL/TLS connections, requiring developers to rely on unencrypted connections for database communication.",
    "source_analysis": null,
    "user_behavior": null,
    "security": null
}